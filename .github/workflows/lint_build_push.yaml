name: Lint, build and push workflow
run-name: Linting source files, building and pushing package
on:
  push:
  workflow_dispatch:
jobs:
  Lint:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository code
        uses: actions/checkout@v5
      - run: echo "üñ•Ô∏è The workflow is now ready to test your code on the runner."
      - name: Install required packages
        run: pip install -r requirements.txt
      - name: Run ruff checks
        run: ruff check .
  Build-and-push:
    runs-on: ubuntu-latest
    needs : Lint
    steps:
      - name: Check out repository code
        uses: actions/checkout@v5
      - name: Install required packages
        run: pip install -r requirements.txt
      - name: Build package
        run: python -m build
      - name: Upload package to GAR
        run: python -m twine upload --repository-url https://europe-west1-python.pkg.dev/card-deck-manager-483313/mypythonreg dist/card_deck_manager-0.0.1-py3-none-any.whl

